---
interface Props {
	title: string;
}

const { title } = Astro.props;

// Determinar si estamos en la página de inicio
const isHomePage = Astro.url.pathname === '/';
---

<!doctype html>
<html lang="es">
	<head>
		<meta charset="UTF-8" />
		<meta name="description" content="P1 Speedway - Viviendo la Velocidad Al Límite" />
		<meta name="viewport" content="width=device-width" />
		<link rel="icon" type="image/svg+xml" href="https://p1speedway.com/images/favicon.svg" />
		<title>{title}</title>
	</head>
	<body class="bg-black text-white">
		<!-- Sección de Navbar -->
		<section id="navbar" class={`px-4 md:px-10 fixed top-0 w-full z-40 transition-all duration-500 ${isHomePage ? 'py-4 md:py-6' : 'py-6'}`}>
			<nav class={`relative ${isHomePage ? 'flex justify-end' : 'flex justify-between items-center'} transition-all duration-500`}>
				{!isHomePage && (
					<a href="/" class="z-50 transition-all duration-500">
						<img src="https://p1speedway.com/images/P1logo.webp" alt="P1 Logo" class="h-16 transition-all duration-500" id="nav-logo">
					</a>
				)}

				<!-- Botón de menú para móviles -->
				<button id="menu-toggle" class="md:hidden inline-flex items-center justify-center p-2 text-white rounded-lg focus:outline-none focus:ring-2 focus:ring-inset focus:ring-gray-600">
					<svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
						<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16m-7 6h7" />
					</svg>
				</button>

				<!-- Menú lateral para móviles -->
				<div id="mobile-menu" class="fixed inset-0 bg-black bg-opacity-70 z-50 transform translate-x-full transition-transform duration-300">
					<div class="flex justify-end p-4">
						<button id="close-menu" class="text-white">
							<svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="white">
								<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" stroke="white" d="M6 18L18 6M6 6l12 12" />
							</svg>              
						</button>
					</div>
					<ul class="flex flex-col items-center space-y-4 mt-20">
						<li><a href="/" class="text-white text-lg">Inicio</a></li>
						<li><a href="/#aboutus" class="text-white text-lg">Sobre Nosotros</a></li>
						<li><a href="/noticias" class="text-white text-lg">Noticias</a></li>
						<li><a href="/#contacts" class="text-white text-lg">Contacto</a></li>
						<li><a href="/reglas" class="text-white text-lg">Reglas de Pista</a></li>
					</ul>
				</div>

				<!-- Menú en escritorio -->
				<ul class="hidden md:flex text-end space-x-2 md:space-x-4 text-sm md:text-xl">
					<li><a href="/" class="inline-block px-2 py-2">Inicio</a></li>
					<li><a href="/#aboutus" class="inline-block px-2 py-2">Sobre Nosotros</a></li>
					<li><a href="/noticias" class="inline-block px-2 py-2">Noticias</a></li>
					<li><a href="/#contacts" class="inline-block px-2 py-2">Contacto</a></li>
					<li><a href="/reglas" class="inline-block px-2 py-2">Reglas de Pista</a></li>
				</ul>
			</nav>
		</section>

		<script define:vars={{ isHomePage }}>
			const handleScroll = () => {
				const navbar = document.getElementById('navbar');
				const navbarNav = navbar.querySelector('nav');
				const logo = document.getElementById('nav-logo');

				if (window.scrollY > 50) {
					// Siempre aplicar el fondo negro con opacidad al hacer scroll
					navbar.classList.add('bg-black', 'bg-opacity-70');

					if (isHomePage) {
						navbarNav.classList.remove('justify-end');
						navbarNav.classList.add('justify-center');
					} else {
						navbar.classList.remove('py-6');
						navbar.classList.add('py-2');
						if (logo) {
							logo.classList.remove('h-16');
							logo.classList.add('h-12');
						}
					}
				} else {
					// Siempre remover el fondo negro con opacidad al volver arriba
					navbar.classList.remove('bg-black', 'bg-opacity-70');

					if (isHomePage) {
						navbarNav.classList.remove('justify-center');
						navbarNav.classList.add('justify-end');
					} else {
						navbar.classList.remove('py-2');
						navbar.classList.add('py-6');
						if (logo) {
							logo.classList.remove('h-12');
							logo.classList.add('h-16');
						}
					}
				}
			};

			// Agregar el event listener para el scroll
			window.addEventListener('scroll', handleScroll);

			// Manejar el menú móvil
			const menuToggle = document.getElementById('menu-toggle');
			const mobileMenu = document.getElementById('mobile-menu');
			const closeMenu = document.getElementById('close-menu');

			menuToggle.addEventListener('click', function() {
				mobileMenu.style.transform = 'translateX(0)';
			});

			closeMenu.addEventListener('click', function() {
				mobileMenu.style.transform = 'translateX(100%)';
			});
		</script>

		<slot />

		<!-- Footer Section -->
		<footer class="bg-black text-white py-16">
			<div class="max-w-6xl mx-auto px-4">
				<div class="text-center space-y-12">
					<!-- Patrocinadores -->
					<div>
						<h2 class="text-2xl font-semibold mb-8">Nuestros Patrocinadores</h2>
						<div class="flex justify-center items-center gap-12">
							<img src="https://p1speedway.com/images/Epson-Logo.png" alt="Epson Logo" class="h-12">
							<img src="https://p1speedway.com/images/latinlogo.webp" alt="Latinsoft Logo" class="h-12">
						</div>
					</div>

					<!-- Contacto -->
					<div>
						<h2 class="text-2xl font-semibold mb-4">Contacto</h2>
						<p class="mb-4">Teléfono: +506 7177 3339 | Email: gerencia@p1speedway.com</p>
						<div class="flex justify-center items-center gap-4">
							<a href="https://facebook.com/p1speedway" class="flex items-center gap-2 text-white hover:text-red-600 transition-colors">
								<svg class="w-6 h-6" fill="currentColor" viewBox="0 0 24 24">
									<path d="M18.77,7.46H14.5v-1.9c0-.9.6-1.1,1-1.1h3V.5h-4.33C10.24.5,9.5,3.44,9.5,5.32v2.15h-3v4h3v12h5v-12h3.85l.42-4Z"/>
								</svg>
								<span>Facebook</span>
							</a>
							<span class="text-white">|</span>
							<a href="https://instagram.com/p1speedway" class="flex items-center gap-2 text-white hover:text-red-600 transition-colors">
								<svg class="w-6 h-6" fill="currentColor" viewBox="0 0 24 24">
									<path d="M12,2.16c3.2,0,3.58,0,4.85.07,3.25.15,4.77,1.69,4.92,4.92.06,1.27.07,1.65.07,4.85s0,3.58-.07,4.85c-.15,3.23-1.66,4.77-4.92,4.92-1.27.06-1.65.07-4.85.07s-3.58,0-4.85-.07c-3.26-.15-4.77-1.7-4.92-4.92-.06-1.27-.07-1.65-.07-4.85s0-3.58.07-4.85C2.38,3.92,3.9,2.38,7.15,2.23,8.42,2.18,8.8,2.16,12,2.16ZM12,0C8.74,0,8.33,0,7.05.07c-4.27.2-6.78,2.71-7,7C0,8.33,0,8.74,0,12s0,3.67.07,4.95c.2,4.27,2.71,6.78,7,7C8.33,24,8.74,24,12,24s3.67,0,4.95-.07c4.27-.2,6.78-2.71,7-7C24,15.67,24,15.26,24,12s0-3.67-.07-4.95c-.2-4.27-2.71-6.78-7-7C15.67,0,15.26,0,12,0Zm0,5.84A6.16,6.16,0,1,0,18.16,12,6.16,6.16,0,0,0,12,5.84ZM12,16a4,4,0,1,1,4-4A4,4,0,0,1,12,16ZM18.41,4.15a1.44,1.44,0,1,0,1.44,1.44A1.44,1.44,0,0,0,18.41,4.15Z"/>
								</svg>
								<span>Instagram</span>
							</a>
						</div>
					</div>

					<!-- Desarrollado por -->
					<div class="space-y-4">
						<p class="text-gray-400">Esta web ha sido desarrollada por:</p>
						<a href="https://www.latinsoftcr.net/"> <img src="https://p1speedway.com/images/latinlogo.webp" alt="Latinsoft Logo" class="h-14 mx-auto px-4"> </a>
						<p class="text-sm">&copy; 2024 P1 Speedway. Todos los derechos reservados.</p>
					</div>
				</div>
			</div>
		</footer>
	</body>
</html>

<style is:global>
	@import '../styles/global.css';
</style>